---
globs: modules/printer.js
---

# PDF 생성 규칙

## 브라우저 윈도우 설정
```javascript
const pdfWindow = new BrowserWindow({
  show: false,                    // 백그라운드 실행
  webPreferences: {
    nodeIntegration: false,
    contextIsolation: true,
    webSecurity: false            // 외부 URL 로드용
  }
});
```

## 페이지 조작
- 2초 대기 후 PDF 생성으로 렌더링 완료 보장
- printSelector로 지정된 요소만 추출
- 180도 회전으로 열화상 프린터 최적화
- 불필요한 요소는 display: none 처리

## PDF 옵션
```javascript
const pdfOptions = {
  pageSize: { width: width * 1000, height: height * 1000 },
  margins: { top: 0, bottom: 0, left: 0, right: 0 },
  printBackground: true,
  landscape: false
};
```

## 파일 관리
- Downloads/WebPrinter 폴더에 타임스탬프 파일명으로 저장
- 24시간 후 자동 정리
- 플랫폼별 적절한 뷰어로 자동 실행

## 정리 작업
- BrowserWindow는 반드시 close() 호출
- 임시 파일 생성 30분 후 정리 스케줄링
- 빈 디렉토리는 자동 삭제