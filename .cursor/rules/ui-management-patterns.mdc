---
globs: renderer/**/*.js,print-preview.html,styles/**/*.css
---
# UI ê´€ë¦¬ íŒ¨í„´

## UIManager ì‹±ê¸€í†¤ íŒ¨í„´

### ì¤‘ì•™ì§‘ì¤‘ì‹ UI ê´€ë¦¬
```javascript
// âœ… UIManager êµ¬ì¡°
const UIManager = {
  elements: {
    statusText: null,
    serverDisplay: null,
    previewFrame: null,
    printerSelect: null,
    // ... ëª¨ë“  DOM ìš”ì†Œ ì°¸ì¡°
  },
  
  init() {
    // DOM ìš”ì†Œ ì´ˆê¸°í™”
    this.elements = {
      statusText: document.getElementById('status-text'),
      serverDisplay: document.getElementById('server-display'),
      // ... ë‚˜ë¨¸ì§€ ìš”ì†Œë“¤
    };
    
    // í•„ìˆ˜ ìš”ì†Œ ê²€ì¦
    const requiredElements = ['statusText', 'printButton'];
    for (const elementName of requiredElements) {
      if (!this.elements[elementName]) {
        console.error(`í•„ìˆ˜ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${elementName}`);
      }
    }
  }
};
```

### UI ìƒíƒœ ì—…ë°ì´íŠ¸
```javascript
// âœ… ìƒíƒœë³„ UI ì—…ë°ì´íŠ¸ ë©”ì„œë“œ
showStatus(message, type = 'info') {
  const statusMessage = this.elements.statusMessage;
  if (!statusMessage) return;
  
  // íƒ€ì…ë³„ ìŠ¤íƒ€ì¼ ì ìš©
  statusMessage.className = `status-message ${type}`;
  statusMessage.textContent = message;
  
  // ìë™ ìˆ¨ê¹€ (ì„±ê³µ/ì •ë³´ ë©”ì‹œì§€ë§Œ)
  if (type === 'success' || type === 'info') {
    setTimeout(() => {
      statusMessage.classList.add('fade-out');
    }, 3000);
  }
}
```

## Toast ì•Œë¦¼ ì‹œìŠ¤í…œ

### Toast ìƒì„± í•¨ìˆ˜
```javascript
// âœ… ë™ì  Toast ì•Œë¦¼
function showToast(message, type = 'info', duration = 3000) {
  const toast = document.createElement('div');
  
  const colors = {
    success: 'linear-gradient(135deg, #28a745, #20c997)',
    error: 'linear-gradient(135deg, #dc3545, #fd7e14)',
    warning: 'linear-gradient(135deg, #ffc107, #fd7e14)',
    info: 'linear-gradient(135deg, #007bff, #6f42c1)'
  };
  
  toast.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    background: ${colors[type]};
    color: white;
    padding: 16px 24px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 10000;
    transform: translateX(400px);
    transition: transform 0.3s ease;
  `;
  
  toast.textContent = message;
  document.body.appendChild(toast);
  
  // ì• ë‹ˆë©”ì´ì…˜
  setTimeout(() => toast.style.transform = 'translateX(0)', 10);
  
  // ìë™ ì œê±°
  setTimeout(() => {
    toast.style.transform = 'translateX(400px)';
    setTimeout(() => toast.remove(), 300);
  }, duration);
}
```

## ë¡œë”© ìƒíƒœ ê´€ë¦¬

### ë‹¨ê³„ë³„ ë¡œë”© í‘œì‹œ
```javascript
// âœ… ì§„í–‰ ë‹¨ê³„ í‘œì‹œ
updateLoadingStep(step, message) {
  const steps = ['init', 'server', 'printers', 'ready'];
  const currentIndex = steps.indexOf(step);
  
  if (this.elements.loadingMainText) {
    this.elements.loadingMainText.textContent = message || '';
  }
  
  if (this.elements.loadingProgress) {
    const progress = ((currentIndex + 1) / steps.length) * 100;
    this.elements.loadingProgress.style.width = `${progress}%`;
  }
  
  // ë‹¨ê³„ë³„ ì•„ì´ì½˜ ì—…ë°ì´íŠ¸
  steps.forEach((s, index) => {
    const stepElement = document.getElementById(`step-${s}`);
    if (stepElement) {
      stepElement.classList.toggle('completed', index <= currentIndex);
      stepElement.classList.toggle('active', index === currentIndex);
    }
  });
}
```

### ë¡œë”© ì˜¤ë²„ë ˆì´
```javascript
// âœ… ë¡œë”© í™”ë©´ ì œì–´
showLoading(show = true) {
  if (this.elements.loadingOverlay) {
    if (show) {
      this.elements.loadingOverlay.classList.remove('hidden');
      this.currentStep = 0;
      this.updateLoadingStep('init');
    } else {
      this.elements.loadingOverlay.classList.add('hidden');
    }
  }
}
```

## í¼ ì»¨íŠ¸ë¡¤ ê´€ë¦¬

### í”„ë¦°í„° ì„ íƒ UI
```javascript
// âœ… í”„ë¦°í„° ëª©ë¡ ì—…ë°ì´íŠ¸
updatePrinterList(printers) {
  const select = this.elements.printerSelect;
  if (!select) return;
  
  // ê¸°ì¡´ ì˜µì…˜ ì œê±°
  select.innerHTML = '';
  
  // í”„ë¦°í„° ì˜µì…˜ ì¶”ê°€
  printers.forEach(printer => {
    const option = document.createElement('option');
    option.value = printer.name;
    option.textContent = printer.displayName;
    
    if (printer.isDefault) {
      option.textContent += ' (ê¸°ë³¸)';
      option.selected = true;
    }
    
    select.appendChild(option);
  });
  
  // í”„ë¦°í„°ê°€ ì—†ëŠ” ê²½ìš°
  if (printers.length === 0) {
    const option = document.createElement('option');
    option.value = '';
    option.textContent = 'ì‚¬ìš© ê°€ëŠ¥í•œ í”„ë¦°í„°ê°€ ì—†ìŠµë‹ˆë‹¤';
    option.disabled = true;
    select.appendChild(option);
  }
}
```

### ì¶œë ¥ ë°©ì‹ í† ê¸€
```javascript
// âœ… PDF/í”„ë¦°í„° ì¶œë ¥ ì „í™˜
handleOutputTypeChange() {
  const selectedType = this.getSelectedOutputType();
  
  // í”„ë¦°í„° ê·¸ë£¹ í‘œì‹œ/ìˆ¨ê¹€
  if (this.elements.printerGroup) {
    this.elements.printerGroup.classList.toggle('show', selectedType === 'printer');
  }
  
  // ë²„íŠ¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
  this.updatePrintButtonText();
}

updatePrintButtonText() {
  const outputType = this.getSelectedOutputType();
  const btn = this.elements.printButton;
  
  if (btn && !btn.disabled) {
    btn.textContent = outputType === 'pdf' ? 'ğŸ“„ PDF ë¯¸ë¦¬ë³´ê¸°' : 'ğŸ–¨ï¸ í”„ë¦°í„°ë¡œ ì¶œë ¥';
  }
}
```

## ë¯¸ë¦¬ë³´ê¸° ê´€ë¦¬

### iframe ë¯¸ë¦¬ë³´ê¸°
```javascript
// âœ… URL ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
showPreview(url) {
  const previewFrame = this.elements.previewFrame;
  if (!previewFrame) return;
  
  // ë¡œë”© í‘œì‹œ
  previewFrame.style.opacity = '0.5';
  
  // iframe src ì„¤ì •
  previewFrame.src = url;
  
  // ë¡œë“œ ì™„ë£Œ ì²˜ë¦¬
  previewFrame.onload = () => {
    previewFrame.style.opacity = '1';
    this.showStatus('ë¯¸ë¦¬ë³´ê¸° ë¡œë“œ ì™„ë£Œ', 'success');
  };
  
  // ì—ëŸ¬ ì²˜ë¦¬
  previewFrame.onerror = () => {
    this.showStatus('ë¯¸ë¦¬ë³´ê¸° ë¡œë“œ ì‹¤íŒ¨', 'error');
    previewFrame.style.opacity = '1';
  };
}
```

## ë°˜ì‘í˜• ë””ìì¸ íŒ¨í„´

### CSS ë³€ìˆ˜ í™œìš©
```css
/* âœ… CSS ë³€ìˆ˜ë¡œ í…Œë§ˆ ê´€ë¦¬ */
:root {
  --primary-color: #007bff;
  --success-color: #28a745;
  --error-color: #dc3545;
  --warning-color: #ffc107;
  --info-color: #17a2b8;
  
  --border-radius: 8px;
  --box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  --transition: all 0.3s ease;
}

/* ë‹¤í¬ ëª¨ë“œ ì§€ì› */
@media (prefers-color-scheme: dark) {
  :root {
    --bg-color: #1a1a1a;
    --text-color: #ffffff;
    --border-color: #333333;
  }
}
```

### ì• ë‹ˆë©”ì´ì…˜ íŒ¨í„´
```css
/* âœ… ë¶€ë“œëŸ¬ìš´ ì „í™˜ íš¨ê³¼ */
.fade-enter {
  opacity: 0;
  transform: translateY(10px);
}

.fade-enter-active {
  opacity: 1;
  transform: translateY(0);
  transition: var(--transition);
}

/* ë¡œë”© ìŠ¤í”¼ë„ˆ */
.spinner {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
```

## í‚¤ë³´ë“œ ì ‘ê·¼ì„±

### ë‹¨ì¶•í‚¤ ì²˜ë¦¬
```javascript
// âœ… í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
document.addEventListener('keydown', (event) => {
  // Ctrl/Cmd + P: ì¸ì‡„
  if ((event.ctrlKey || event.metaKey) && event.key === 'p') {
    event.preventDefault();
    if (!UIManager.elements.printButton.disabled) {
      executePrint();
    }
  }
  
  // Escape: ì°½ ë‹«ê¸°
  if (event.key === 'Escape') {
    IPCHandler.hideToBackground();
  }
  
  // Tab ë„¤ë¹„ê²Œì´ì…˜ ê°œì„ 
  if (event.key === 'Tab') {
    // í¬ì»¤ìŠ¤ íŠ¸ë© êµ¬í˜„
    handleTabNavigation(event);
  }
});
```

## ì—ëŸ¬ ìƒíƒœ í‘œì‹œ

### ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€
```javascript
// âœ… ì—ëŸ¬ íƒ€ì…ë³„ ë©”ì‹œì§€ ì²˜ë¦¬
function displayError(error) {
  let userMessage = 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤';
  let icon = 'âŒ';
  
  // ì—ëŸ¬ íƒ€ì…ë³„ ì²˜ë¦¬
  if (error.code === 'ERR_INTERNET_DISCONNECTED') {
    userMessage = 'ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”';
    icon = 'ğŸŒ';
  } else if (error.message.includes('printer')) {
    userMessage = 'í”„ë¦°í„°ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”';
    icon = 'ğŸ–¨ï¸';
  } else if (error.message.includes('permission')) {
    userMessage = 'ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤';
    icon = 'ğŸ”’';
  }
  
  // Toastë¡œ í‘œì‹œ
  showToast(`${icon} ${userMessage}`, 'error', 5000);
  
  // ìƒíƒœ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
  UIManager.showStatus(userMessage, 'error');
}
```

## ìƒíƒœ ë™ê¸°í™”

### UIì™€ ë°ì´í„° ë™ê¸°í™”
```javascript
// âœ… ì „ì²´ UI ìƒíƒœ ì—…ë°ì´íŠ¸
function updateUI() {
  const hasUrl = receivedUrls.printUrl || receivedUrls.previewUrl;
  const outputType = UIManager.getSelectedOutputType();
  const printerSelected = outputType === 'pdf' || UIManager.elements.printerSelect.value;
  
  // ì¸ì‡„ ë²„íŠ¼ í™œì„±í™”
  UIManager.updatePrintButton(hasUrl && printerSelected);
  
  // ìƒíƒœ í‘œì‹œ
  if (!hasUrl) {
    UIManager.showStatus('ì¸ì‡„í•  ë°ì´í„°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...', 'info');
  } else if (!printerSelected && outputType === 'printer') {
    UIManager.showStatus('í”„ë¦°í„°ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”', 'warning');
  } else {
    UIManager.showStatus('ì¸ì‡„ ì¤€ë¹„ ì™„ë£Œ', 'success');
  }
}
```